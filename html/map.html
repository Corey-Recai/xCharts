<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>地图</title>
    <link rel="stylesheet" href="../css/xCharts.css"/>
    <script src="../js/d3.js"></script>
    <script src="../js/xCharts-0.0.2.js"></script>
    <script src="../js/chart/map.js"></script>
</head>
<body>
<style>
    .map {
        width: 100%;
        height: 700px;
        border: 5px solid #eee;
    }
</style>
<div class="map">

</div>

<script>
    var mapName = [
        '中国',
        // 23个省
        '广东', '青海', '四川', '海南', '陕西',
        '甘肃', '云南', '湖南', '湖北', '黑龙江',
        '贵州', '山东', '江西', '河南', '河北',
        '山西', '安徽', '福建', '浙江', '江苏',
        '吉林', '辽宁', '台湾',
        // 5个自治区
        '新疆', '广西', '宁夏', '内蒙古', '西藏',
        // 4个直辖市
        '北京', '天津', '上海', '重庆',
        // 2个特别行政
        '香港', '澳门'
    ];
    var chart = xCharts(document.querySelector('.map'))
    var option = {
        title: {
            show: true,
            text: '地图',
            textStyle: {
                fontSize: 20
            }
        },
        tooltip:{
            show:true,
            trigger:'item',
            formatter:tipFormatter
        },
        dataRange: {
            maxValue: 1000,
            minvalue: 0,
            maxColor: 'red',
            minColor: 'yellow'
        },
        event: {
            mouseclick: mapClick,
//            mouseenter:function(){},
//            mouseleave:function(){}
        },
        series: [
            {
                type: 'map',
                map: '中国',
                data: []
            }
        ]
    }
    var flag = false;
    function mapClick(e, name) {

        if (flag) {
            option.series[0].map = '中国';
            option.title.text = '中国';
            chart.loadConfig(option);
            flag = false;

        } else {
            flag = true;
            option.series[0].map = name;
            option.title.text = name;
            chart.loadConfig(option);
        }

    }

    function tipFormatter(data){
        if(!flag){
            return '<p>点击进入'+data.name+'</p>'
        }else{
            return '<p>点击回到中国地图</p>'
        }

    }

    for (var i = 0; i < mapName.length; i++) {
        //添加值
        option.series[0].data.push({'name': mapName[i], value: Math.floor(Math.random() * 1000)})
    }

    chart.loadConfig(option);


    //    for(var i=0;i<mapName.length;i++){
    //        var div = document.createElement('div');
    //        div.setAttribute('class','map');
    //        document.body.appendChild(div);
    //        var chart = xCharts(div);
    //        option.title.text=mapName[i];
    //        option.series[0].map=mapName[i];
    //        chart.loadConfig(option);
    //    }


    //    function getXY(){
    //        var list =[];
    //        for(var i=0;i<xp.length;i++){
    //            list.push([xp[i],yp[i]]);
    //        }
    //
    //        console.log(JSON.stringify(list));
    //    }

</script>

</body>
</html>